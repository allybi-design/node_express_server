<%- include("../partials/head.ejs") %>

<body>
  <%- include("../partials/nav.ejs") %>
    <main class="container">
      <% if(products.length > 0) { %>
      <h1>Products List</h1>
      <div class="row">
        <% products.forEach(product =>{ %>
        <div class=" col-4 my-3">
          <div class="card-deck ">
            <div class="card">
              <img
                src="<%= product.imageUrl %>"
                class="card-img-top"
                alt="<%= product.title %>"
              />
              <div class="card-body">
                <h5 class="card-title"><%= product.title.toUpperCase()%></h5>
                <h6 class="small">Item: <%=product._id%></h6>
                <h6 class="card-subtitle text mutes">Â£<%= parseFloat(product.price).toFixed(2)%></h6>
                <p class="card-text">
                  <%= product.description%>
                </p>
                <div class="d-flex">
                <a class="mx-1 btn btn-outline-primary" href="/products/<%=product._id%>">Details</a>
                <form action="/cart" method="POST">
                  <input type="hidden" name="_id" value="<%=product._id%>">
                  <button class="mx-1 btn btn-outline-success" type="submit">Add to Cart</button>
                </form>
                </div>
              </div>
            </div>
          </div>
        </div>
          <% }) %>
        </div>
        <% } else { %>
        <h1>No Products found</h1>
        <% } %>
      </div>
    </main>
    <%- include("../partials/scripts.ejs")%>
  </body>


  <%- include("../partials/end.ejs") %>
